[TOC]

# CHAPTER 11, 엔터프라이즈 vs 웹 서비스

## [ 강의 29, 엔터프라이즈 vs 웹 서비스 ]

> **응용법위로 보는 차이**

엔터프라이즈 : 돈, 생명 같은 것과 관련된 영역이 많은 것이 특징 - 시스템 다운이 치명적!

시스템화해야 할 대상에 따라 요구되는 조건, 세부적인 기술등이 달라진다



### - 엔터프라이즈와 웹서비스 비교

| ---         | 엔터프라이즈     | 웹서비스                  |
| ----------- | ---------------- | ------------------------- |
| 1. 트래픽   | 그다지 많지 않음 | 굉장히 많음               |
| 2. 성장성   | 적당             | 폭발적                    |
| 3. 신뢰성   | 사수(死守)       | 99%                       |
| 4. 트랜잭션 | 많이 사용        | 그다지 많이 사용하지 않음 |



#### 1. 트래픽

엔터프라이즈에 비해 웹서비스는 어마어마한 트래픽이 발생할 가능성이 높다

#### 2. 성장성

엔터프라이즈는 실제 비즈니스와 연계 -> 급격한 성장 X

웹서비스는 폭발적인 성장을 하는 서비스 비율이 줄었지만 여전히 성장속도는 압도적

#### 3. 신뢰성

엔터프라이즈는 장애가 발생하거나 시스템 문제가 생기면 실제 돈이 사라지기도 한다

> 문제 발생 시, 피해자의 손해배상청구 혹은 사람 목숨을 구하지 못하는 사태로 발생 가능
>
> ==> 굉장히 높은 신뢰성을 요구!

웹서비스의 경우 돈과 직접적으로 관련되는 일은 적다.

> 일시적으로 서비스를 볼 수 없게되는 경우 간단한 공지만으로 넘어갈 수 있음
>
> 그렇게 높은 레벨이 요구되지 않음

#### 4. 트랜잭션 - DB관련 

엔터프라이즈는 데이터 간 정합성을 정확히 유지해야 한다.

> DB처리에 있어 트랜잭션 처리를 이용해 정합성을 명확히 담보하며 처리해야함
>
> ex ) 계좌 인출

웹 서비스는 일시적으로 정합성이 일치하지 않아도 허용하도록 처리하는 경우가 있음

> 단기적으로 정합성을 잃어도 "죄송합니다" 시전으로 끝낼 수 있음
>
> 대신, 비용을 줄이거나 적은 서버로 트래픽이 많이 발생하도록 설계



### [ 웹 서비스의 인프라]

> **중요시되는 세 가지 포인트**

#### 1, 저비용 고효율

> 상반관계 필요 ====> 100%의 신뢰성을 목표로 하지 **않는다.**

#### 2, 확장성 응답성 중요시

> 장래를 위해 제대로 확장하는 것이 중요한 경우가 많다.

#### 3, 개발속도를 중시한 인프라 구성

> 웹서비스는 사양이 이리저리 바뀌는 경우가 많다. 이에 유연하게 대응할 수 있는 인프라여야만 한다.  
>
> - 빠르게 변하는 웹 서비스에서 엔터프라이즈와 같이 긴 시간 준비해 프로젝트를 진행 할 경우 완전히 시기를 놓친다.
> - 애플리케이션을 가능한 한 간편하게 만든다.
> - 배포할 댸 처리중인 요청에 영향이 없도록 한다.
> - 필요한 서버를 즉시 추가할 수 있도록 한다.
> - 배포한 코드에 문제가 있을 시 즉시 이전 상태로 돌아갈 수 있도록 한다.
> - 서비스에 대해 기동성 있게 리소스를 제공할 수 있어야 한다.



------



## [강의 30, 클라우드 vs 자체구축 인프라]

> **이 책은 2011년에 쓰인 책으로, 현재 클라우드 컴퓨팅의 이야기와 다소 멀게 느껴질 수 있다.**
>
> **이 문서는, 이 책의 요약이므로 가볍게 읽고 넘어가는 것이 좋을 것같다.**
>
> **더 알고싶다면 직접 찾아보고 공부하는 것을 추천한다.**

### - 클라우드 컴퓨팅

[클라우드 컴퓨팅](<https://ko.wikipedia.org/wiki/%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C_%EC%BB%B4%ED%93%A8%ED%8C%85>)은 공유 컴퓨터 처리 자원과 데이터를 컴퓨터와 다른 장치들에 요청 시 제공해준다.

이 시점, 하테나에서는 자체구축 인프라를 구축하고 있지만, 클라우드를 사용할지에 대한 판단에 서있었다. 

### - 클라우드의 장단점

클라우드는 저가로 사용하면서 확장할 수 있음

장점 : 확장의 유연성

단점 :  획일적인 호스트 사양(메모리 상한성, 느린 I/O)

​	    애매한 로드밸런서

​	    때때로 멈춤



### - 하테나에서의 클라우드 서비스 사용

현재(2011) 하테나에서는 AWS[^Amazon Web Services]를 일부 사용하고 있음.

미디어 저장소로서  Amazon Cloudfront를 사용중

하지만, 애플리케이션이나 DB를 본격적으로 저장하는 것은 아직 시기상조라고 판단

> 하지만 앞으로 어느정도 평행선을 달릴지, 그 시점의 하테나 규모에 따라서도 달라지므로 지켜볼 필요를 느낌, 이는 하테나의 성장속도가 어떻게 될 것인지에 달림

> 클라우드 컴퓨팅은 소규모 서비스 혹은 학생들이 사용해 보는 트라이얼 용도로 아주 좋은 분야

> 클라우드 컴퓨팅 세계에서 전체적인 쉐어는 서서히 증가하리라고 생각
>
> 하테나로서 국소적으로 도입/사용하며 노하우를 쌓아갈 예정



### - 자체 구축 인프라의 장점

#### 1, 하드웨어 구성을 유연하게 할 수 있음

- 메모리 탑재량을 늘렸으면 하는 요구가 높아지고 있다.

- 또한, 자체적 SSD를 도입해 I/O성능을 단번에 올리는 등 서버 한계를 높일 수 있다.

- 클라우드 컴퓨팅의 경우 상한선이 정해져 있으므로, 자유롭게 제어할 수 없다.



#### 2, 서비스로부터의 요청에 유연하게 대응할 수 있음

- 단순히 대수를 늘리는 것 뿐 아니라, 네트워크 측면에서 가까운 구성으로 갖추고 싶다거나, 데이터를 대량으로 쌓을 수 있도록 하는 요청에 대한 대응
- 클라우드에서도 가능한 장점



#### 3, 병목현상 제어 가능

- 로드밸런서, 네트워크 등에서 발생하는 문제를 직접 해결할 수 있음
- 클라우드 컴퓨팅에서는 클라우드 환경을 제공하는 측의 기술에 의존할 수 밖에 없음



### - 자체구축 인프라와 수직통합 모델

**수직통합 모델?**

> 물리적 계층부터 서비스 설계까지 모든 것을 한 회사에서 구축하는 모델

**수평 분산 모델?**

> 각 계층마다 다른 기업이 시스템을 제공, 각각이 모여 전체 시스템이 구축되는 모델

하테나는 수직통합 모델을 채택하고 있음



### - 하테나 서비스 규모

- 등록 사용자 수 150만명, 1900만UU
- 수십억 액세스
- 피크 시 회선 트래픽량 850Mbps
- 하드웨어 600대 이상



### - 하테나 북마크 시스템 구성도

- 리버스 프록시 3대
- AP서버 11대
- DB서버 24대
- 캐시서버 7대
- 로드밸런서 2대
- 엔진 9대

합계 56대, 

**다음장부터 확장성/다중화/네트워크 등에대해 상세하게 다루겠다.**
