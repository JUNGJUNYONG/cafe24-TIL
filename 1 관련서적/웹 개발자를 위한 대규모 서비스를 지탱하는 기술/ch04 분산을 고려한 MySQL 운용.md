[TOC]

------

# ch04 분산을 고려한 MySQL 운용 



------

## [ 분산된 시스템 알기 ]

> 애플리케이션을 만들기 전에 알아두어야 할 MySQL 분산 노하우



#### < 지금까지의 주된 흐름 >

**분산을 할 때 고려할 것** 

- 국소성
- 데이터 규모에 맞는 탑재 메모리 조정
- 메모리 증설로도 대응할 수 없을 경우 분산



#### < 4장에서 다룰 것 >

- 분산을 고려한 MySQL 운용

- MySQL 스케일아웃 전략

  - 인덱스의 중요성(11강)
  - MySQL 분산(12강)
  - 스케일아웃과 파티셔닝(13강)

  > MySQL = LAMP[^Linux + Apache + MySQL + Perl]인 웹 서비스의 사실상 표준 데이터 저장소



#### < 들어가기 전 ... >

MySQL을 대규모 환경에서 운용할 때 어떤 점에 주의해야 하는지,

MySQL을 대규모 환경에서 운용할 경우의 분위기를 알아두는 것을 목표 !

------







------

## [ 강의 11, 인덱스를 올바르게 운용하기 ]

> 분산을 고려한 MySQL 운용의 대전제



### 분산을 고려한 MySQL 운용, 세 가지 포인트

- OS 캐시 활용[^강의11]

- 인덱스를 적절하게 설정하기[^강의11]

  > Q : 인덱스를 생성하고 이를 사용하도록 제대로 쿼리를 던지면 응답이 빨라지는가!?
  >
  > A : 그렇다. 인덱스를 적절하게 설정하는 것은 매우 중요하다. 테이블의 칼럼에 인덱스를 생성하고, 해당 인덱스를 이용해 데이터를 검색할 수 있게되면 빨라진다.

- 확장을 전제로 한 설계[^강의12]



### OS 캐시 활용

**OS 캐시**

> **전체 데이터 크기에 주의**해서 **데이터량이 물리 메모리보다 가능한 적어지도록 유지**한다.

> **메모리가 부족할 경우에는 증설**한다 (증설 포인트는 앞서 설명함)



**[ 스키마 설계가 데이터 크기에 미치는 영향을 고려한다. ]**

MySQL에서는 처음에 `create table`로 스키마를 결정 ! 

> 이 스키마는 상당히 중요함

앞서 설명했던 하테나 북마크의 경우와 같이 레코드 수가 3억이라면, 

1레코드에 8byte 칼럼을 1개 추가하면, ' 8*3억 byte(3GB) ' 만큼의 데이터가 늘어남

> 스키마를 조금 변경하는 것 만으로 GB단위로 데이터가 증감함

> 어느정도 규모 있는 서비스가 되면 칼럼변경, 스키마변경에도 주의를 기울여야 함



**대량의 데이터를 저장하려는 테이블은 레코드가 가능 한 작아지도록 간결하게 설계하도록!**

< 기본적인 수치는 머리에 새겨두자 >

> 정수(int형)는 32bit == 4byte
>
> 문자열은	       8bit == 1byte



### 보충[정규화]

**Q : 정규화해서 DB를 나눠도 괜찮을까?**