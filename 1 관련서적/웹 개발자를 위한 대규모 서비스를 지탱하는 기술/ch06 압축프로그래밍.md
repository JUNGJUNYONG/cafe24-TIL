# 06. [과제]압축 프로그래밍

> 5챕터까지 대규모 데이터 처리에 따른 CPU부하, DB서버 I/O 부하에 의한 문제를 해결하는 방법에 대해 다루었는데, 이번 챕터는 데이터를 압축하여 크기를 줄이는 방법에 대해 다룬다. 실제 압축 알고리즘 중에서 VB Code라는 알고리즘을 이용하여 설명하고 있다.

## 압축의 필요성
> 1. 디스크 I/O를 줄일 수 있다.
> 2. RDBMS에 데이터를 최소한의 크기로 줄여서 저장할 수 있다.<br/>
_(여기에서 드는 의문점은, DB에 저장하기 위해 압축할 때 + DB에서 불러온 데이터의 압축을 해제할 때 사용되는 자원이 꽤 많을 거라 생각하는데, 이것이 과연 효율적일까?)_

## VB Code 알고리즘
> 이 알고리즘은 정수열을 압축할 때 사용할 수 있는 알고리즘이다. 바이트별로 부호 비트를 사용해서 해당 바이트에서 정수열이 끝나는가
_(1일 때는 해당 바이트에서 끝나고, 0일 때는 끝나지 않는다)_
를 표시하고, 나머지 7비트를 데이터를 표현하는 데 사용하여 고정길이 자료형에서 불필요한 부분을 생략할 수 있다.

_예시:_

숫자 130을 int 자료형으로 표현한다면 그 비트열은

> __00000000 00000000 00000000 10000010__

이 된다.
실제 숫자를 표현하는 바이트는 마지막 1바이트이고, 나머지 3바이트는 사용하지 않는다.
여기에 VB Code를 적용하는 과정은 아래와 같다.

1. 해당 숫자를 표현하기 위해 필요한 바이트 계산
-> 130은 8비트를 이용해야 하므로 2바이트가 필요하다.
2. 부호비트 설정
-> 첫번째 바이트의 부호비트는 0, 두번째 바이트의 부호비트는 1

> __00000000 10000000__

3. 데이터 표현

> __00000001 10000010__

이렇게 되면 4바이트로 표현되던 숫자를 2바이트로 표현할 수 있게 된다.

## VB Code의 의사코드
- VB Code를 구현할 때 중요한 점은 부호 비트를 이용해서 해당 바이트에서 데이터가 끝나는가를 표시하는 것이다.

![img281](uploads/4396212fed3b547c1e53856f267ce461/img281.png)

## 정수 열을 압축할 경우
- 정수 사이의 숫자 차이를 이용하여 표현함으로써 정수의 열을 압축할 수 있다. 이 방법을 사용하기 위해서는 정수 열이 정렬 완료된 상태여야 한다.

_예시:_

정렬된 정수 배열 

> __[3,5,20,21,23,76,77,78]__

이 있을 때, 이 배열은 오름차순 정렬되어 있다.

여기서 두번째 숫자부터는 앞의 숫자와의 차이를 이용하여 표현한다.

> __[3,2,15,1,2,53,1,1]__

이렇게 표현하면 차이가 작을 경우 1,2와 같은 작은 숫자가 나온다.

VB Code로 압축할 때는 작은 숫자일 경우가 더 효율이 좋으므로, 이렇게 표현한 뒤 압축하는 것이 좋다.
